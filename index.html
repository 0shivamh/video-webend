<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Live Stream</title>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.17.0/video-js.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.17.0/video.min.js"></script>
  <script src="https://player.live-video.net/1.18.0/amazon-ivs-videojs-tech.min.js"></script>
  <script src="https://player.live-video.net/1.18.0/amazon-ivs-quality-plugin.min.js"></script>

  <style>
    html,body{margin:0;padding:0;width:100%;height:100%;background:#000}
    .player-wrapper{max-width:1080px;margin:auto}
  </style>
</head>

<body>

<div class="player-wrapper">
  <video
    id="amazon-ivs-videojs"
    class="video-js vjs-fluid vjs-big-play-centered"
    controls
    playsinline>
  </video>
</div>

<script>
(function(){
  const _0xA=[
    'href','location','match','replace','startsWith',
    'https://test-video-stream.netlify.app/',
    'amazon-ivs-videojs','AmazonIVS','videojs'
  ];
  const _0xB=i=>_0xA[i];

  const _u=window[_0xB(1)][_0xB(0)];
  const _r=new RegExp(_0xB(5)+'(.+)');
  const _m=_u[_0xB(2)](_r);

  let _p='';

  if(_m&&_m[1]){
    let _x=_m[1][_0xB(3)](/^\/|\/$/g,'');
    _p=_x[_0xB(4)]('http')?_x:'https://'+_x;
  }

  if(!_p) return;

  registerIVSTech(window[_0xB(8)]);
  registerIVSQualityPlugin(window[_0xB(8)]);

  const _player=videojs(_0xB(6),{
    techOrder:[_0xB(7)],
    controlBar:{
      progressControl:true,
      fullscreenToggle:true,
      pictureInPictureToggle:true
    },
    playbackRates:[0.5,1,1.5,2]
  });

  _player.ready(function(){
    _player.enableIVSQualityPlugin();   // âœ… FIXED
    _player.volume(0.3);
    _player.src(_p);
  });

})();
</script>

</body>
</html>
